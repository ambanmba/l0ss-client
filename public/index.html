<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Primary Meta Tags -->
  <title>L0ss Client - Open Source Lossy Compression Tools</title>
  <meta name="title" content="L0ss Client - Open Source Lossy Compression Tools">
  <meta name="description" content="100% client-side lossy compression for JSON, CSV, JavaScript, HTML, CSS, SQL, XML, YAML, SVG, and more. Privacy-first, offline-capable Progressive Web App.">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="L0ss Client - Open Source Lossy Compression Tools">
  <meta property="og:description" content="100% client-side lossy compression. Privacy-first, offline-capable.">

  <!-- PWA -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#ff4444">
  <link rel="icon" type="image/svg+xml" href="icons/favicon.svg">

  <!-- Styles -->
  <link rel="stylesheet" href="../styles/main.css">
</head>
<body>
  <div class="app">
    <!-- Header -->
    <header class="header">
      <div class="logo">
        <span class="logo-l">L</span><span class="logo-zero">0</span><span class="logo-ss">ss</span>
        <span class="logo-subtitle">Client</span>
      </div>
      <div class="header-links">
        <a href="https://github.com/ambanmba/l0ss-client" target="_blank" rel="noopener">GitHub</a>
        <a href="#" id="installBtn" class="install-button" style="display:none;">Install App</a>
      </div>
    </header>

    <!-- Main Container -->
    <main class="container">
      <!-- Warning Banner -->
      <div class="warning-banner">
        <div class="warning-icon">‚ö†Ô∏è</div>
        <div class="warning-content">
          <strong>Important:</strong> Lossy compression permanently removes data to reduce file size. Always thoroughly test compressed files in your development and staging environments before using in production to ensure functionality remains intact.
        </div>
      </div>

      <!-- Upload Section -->
      <section class="upload-section">
        <div class="upload-area" id="uploadArea">
          <div class="upload-icon">üìÅ</div>
          <h2>Drop files here or click to browse</h2>
          <p>Supports: JSON, CSV, JavaScript, HTML, CSS, SQL, XML, YAML, SVG, Markdown, Text</p>
          <input type="file" id="fileInput" multiple accept=".json,.csv,.js,.html,.css,.sql,.xml,.yaml,.yml,.svg,.md,.txt" style="display: none;">
          <button class="btn btn-primary" id="browseBtn">Browse Files</button>
        </div>
      </section>

      <!-- File List Section -->
      <section class="files-section" id="filesSection" style="display: none;">
        <h2>Selected Files (<span id="fileCount">0</span>)</h2>
        <div id="filesList"></div>
      </section>

      <!-- Preview Section -->
      <section class="preview-section" id="previewSection" style="display: none;">
        <h2>Compression Preview</h2>
        <div class="comparison-grid" id="comparisonGrid">
          <div class="comparison-card" data-level="minimal">
            <h3>Minimal</h3>
            <div class="stat-value" id="previewMinimal">-</div>
            <div class="stat-label" id="previewMinimalReduction">-</div>
            <div class="level-description">Safe optimizations only</div>
          </div>
          <div class="comparison-card" data-level="moderate">
            <h3>Moderate</h3>
            <div class="stat-value" id="previewModerate">-</div>
            <div class="stat-label" id="previewModerateReduction">-</div>
            <div class="level-description">Balanced approach</div>
          </div>
          <div class="comparison-card" data-level="aggressive">
            <h3>Aggressive</h3>
            <div class="stat-value" id="previewAggressive">-</div>
            <div class="stat-label" id="previewAggressiveReduction">-</div>
            <div class="level-description">Maximum compression</div>
          </div>
        </div>

        <div class="preview-hint">
          üí° Click a level above to select it and see detailed optimizations
        </div>

        <!-- Diff Preview Section -->
        <div id="diffPreview" style="margin-top: 1.5rem; display: none;">
          <h3 style="margin-bottom: 0.5rem;">Changes with <span id="diffLevelName" style="color: var(--success);">Moderate</span>:</h3>
          <div id="diffContent"></div>
        </div>

        <!-- Compress from Preview Button -->
        <div style="margin-top: 1.5rem; text-align: center; display: none;" id="compressFromPreviewContainer">
          <button class="btn btn-success btn-large" id="compressFromPreview">
            Compress with <span id="compressLevelName">Moderate</span>
          </button>
        </div>

        <!-- Configuration Panel -->
        <div class="config-panel" id="configPanel" style="display: none;">
          <div class="config-header">
            <h3>‚öôÔ∏è Advanced Options</h3>
            <button class="config-toggle" id="configToggle">Hide Options</button>
          </div>
          <div class="config-content" id="configContent"></div>
          <div class="config-hint">
            üí° Changes will automatically update the preview. Adjust options to see their impact on compression.
          </div>
        </div>
      </section>

      <!-- Compression Settings -->
      <section class="settings-section" id="settingsSection" style="display: none;">
        <div class="selected-level-info" id="selectedLevelInfo" style="display: none;">
          <div class="selected-level-badge">
            Selected: <strong id="selectedLevelName">Moderate</strong>
          </div>
        </div>
        <button class="btn btn-success btn-large" id="compressBtn">
          üóúÔ∏è Compress Files
        </button>
      </section>

      <!-- Results Section -->
      <section class="results-section" id="resultsSection" style="display: none;">
        <h2>Compression Results</h2>

        <!-- Stat Cards -->
        <div class="stat-grid" id="statGrid" style="display: none;">
          <div class="stat-card">
            <div class="stat-value" id="originalSize">-</div>
            <div class="stat-label">Original Size</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="compressedSize">-</div>
            <div class="stat-label">Compressed Size</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="reduction">-</div>
            <div class="stat-label">Reduction</div>
          </div>
        </div>

        <div id="resultsList"></div>

        <!-- Manifest Info -->
        <div id="manifestInfo" style="display: none; margin-top: 1.5rem; padding: 1rem; background: var(--bg-secondary); border-radius: 4px; border-left: 3px solid var(--accent);">
          <div style="font-size: 0.9rem; color: var(--text-secondary);">
            <strong style="color: var(--text-primary);">Recovery Manifest:</strong> This JSON file contains all operations performed and can help you understand what was changed.
            <span id="reversibilityInfo" style="color: var(--success);"></span>
          </div>
        </div>

        <div class="results-actions">
          <button class="btn btn-primary" id="downloadAllBtn">üì• Download All</button>
          <button class="btn btn-secondary" id="resetBtn">üîÑ Compress More Files</button>
        </div>
      </section>

      <!-- Loading State -->
      <div class="loading" id="loading" style="display: none;">
        <div id="loadingText">‚è≥ Processing files...</div>
        <div class="progress-bar-container">
          <div class="progress-bar" id="progressBar"></div>
        </div>
        <div id="loadingSubtext"></div>
      </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <p>
        üóúÔ∏è <strong>L0ss Client</strong> - 100% Client-Side Compression
        <br>
        <small>Privacy-First ‚Ä¢ Offline-Capable ‚Ä¢ Open Source</small>
      </p>
      <p>
        <a href="https://github.com/ambanmba/l0ss-client" target="_blank" rel="noopener">View on GitHub</a> ‚Ä¢
        <a href="https://github.com/ambanmba/l0ss-client/blob/main/LICENSE" target="_blank" rel="noopener">MIT License</a> ‚Ä¢
        <a href="https://l0ss.com" target="_blank" rel="noopener">Web Version</a>
      </p>
    </footer>
  </div>

  <!-- Scripts -->
  <script type="module" src="../src/app.js"></script>
</body>
</html>
